import requests
import pandas as pd
from bs4 import BeautifulSoup


#TODO: fix request query
#input should have + instead of " "
def web_search(program):
    url = 'https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=' + program
    page = requests.get(url)
    soup = BeautifulSoup(page.content, 'html.parser')
    print(soup.prettify())

# query = {'cvekey.cgi?keyword': 'Apache 2.0'}
# r = requests.get('https://cve.mitre.org/cve/search_cve_list.html', data=query)
# print(r.text)


db = pd.read_csv('allitems.csv', encoding='ANSI', skiprows=2) #Reading csv file, Change skiprows if new csv file
#db_top = db.head(0) #Getting header titles
db.rename(columns={'Name': 'id', 'Description' : 'description'}, inplace=True) #Renaming column
sub = db.loc[db['description'].str.contains('Apache')] #Getting rows with Apache in description

print(db_top)