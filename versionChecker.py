import requests
from bs4 import BeautifulSoup
import subprocess
import os
import platform

current_os = platform.system() #Determening current OS

#Experimented with commandline prompts
if current_os == 'Windows':
    #output = os.popen('wmic product get name, version')
    name = os.popen('wmic product get name')
    name.read().split('\n')
    version = os.popen('wmic product get version')
    version.read().split('\n')
    print(name)
#elif current_os == 'Linux':
    #TODO: implement Linux terminal query
else:
    output = os.popen('ps axc | sed "s/.*:..... /\"/" | sed s/$/\"/')

def windows_search():
    name = os.popen('wmic product get name')
    name.read().split('\n')
    version = os.popen('wmic product get version')
    version.read().split('\n')
    print(name)


#input should have + instead of " "
def search(query):
    url = 'https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=' + query
    page = requests.get(url)
    soup = BeautifulSoup(page.content, 'html.parser')
    print(soup.prettify())

#fix request query


# query = {'cvekey.cgi?keyword': 'Apache 2.0'}
# r = requests.get('https://cve.mitre.org/cve/search_cve_list.html', data=query)
# print(r.text)
