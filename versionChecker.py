import requests
from bs4 import BeautifulSoup
import subprocess
import os
import platform

current_os = platform.system()
#Experimented with commandline prompts
if current_os == 'Windows':
    output = os.popen('wmic product get name, version')
    output = output.read().strip(' ')
else:
    output = os.popen('ps axc | sed "s/.*:..... /\"/" | sed s/$/\"/')


def windowsSearch():
    name = os.popen('wmic product get name')
    version = os.popen('wmic product get version')

#output_sub = subprocess.check_output(['wmic', 'product', 'get', 'name', 'version'])
print(output)


#input should have + instead of " "
def search(query):
    url = 'https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=' + query
    page = requests.get(url)
    soup = BeautifulSoup(page.content, 'html.parser')
    print(soup.prettify())

#TODO: fix request query



# query = {'cvekey.cgi?keyword': 'Apache 2.0'}
# r = requests.get('https://cve.mitre.org/cve/search_cve_list.html', data=query)
# print(r.text)


# #Getting System Application Information
# Data = subprocess.check_output(['wmic', 'product', 'get', 'name'])
# a = str(Data)
# apps = dict()
#
# try:
#     for i in range(len(a)):
#         print(a.split('\\r\\r\\r\\n')[6:][i])
# #       apps.set_val(i)
# except IndexError as e:
#     print("Done")